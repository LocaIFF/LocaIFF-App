{"ast":null,"code":"import React,{useCallback,useEffect,useMemo,useRef,useState}from\"react\";import{TransformWrapper,TransformComponent}from\"react-zoom-pan-pinch\";import{buildRoutePath}from\"../utils/routeUtils\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function MapViewer(_ref){let{layer,hotspots,selectedHotspotId,onHotspotSelect,routePoints,transformRef}=_ref;const routePath=useMemo(()=>buildRoutePath(routePoints),[routePoints]);const hasRoute=(routePoints===null||routePoints===void 0?void 0:routePoints.length)>1;const[isImageLoaded,setIsImageLoaded]=useState(false);const[searchTerm,setSearchTerm]=useState(\"\");const[isListening,setIsListening]=useState(false);const[isSearchFocused,setIsSearchFocused]=useState(false);const inactivityTimerRef=useRef(null);const recognitionRef=useRef(null);// ✅ adicionado\n// Ajusta largura da barra de pesquisa dinamicamente\nconst computedSearchWidth=useMemo(()=>{const base=480;const max=680;const extra=Math.min(searchTerm.length*12,max-base);return base+extra;},[searchTerm.length]);const activateSearchGlow=useCallback(()=>{setIsSearchFocused(true);if(inactivityTimerRef.current){clearTimeout(inactivityTimerRef.current);}inactivityTimerRef.current=setTimeout(()=>{setIsSearchFocused(false);},5000);},[]);const performSearch=useCallback(term=>{const normalized=term.trim().toLowerCase();if(!normalized)return;const match=hotspots.find(spot=>{var _spot$title$toLowerCa,_spot$title,_spot$label$toLowerCa,_spot$label;const title=(_spot$title$toLowerCa=(_spot$title=spot.title)===null||_spot$title===void 0?void 0:_spot$title.toLowerCase())!==null&&_spot$title$toLowerCa!==void 0?_spot$title$toLowerCa:\"\";const label=(_spot$label$toLowerCa=(_spot$label=spot.label)===null||_spot$label===void 0?void 0:_spot$label.toLowerCase())!==null&&_spot$label$toLowerCa!==void 0?_spot$label$toLowerCa:\"\";return title.includes(normalized)||label.includes(normalized);});if(match){onHotspotSelect===null||onHotspotSelect===void 0?void 0:onHotspotSelect(match.id);}else{console.info(\"Nenhum hotspot encontrado para:\",term);}},[hotspots,onHotspotSelect]);const handleSearchSubmit=useCallback(event=>{event.preventDefault();activateSearchGlow();performSearch(searchTerm);},[activateSearchGlow,performSearch,searchTerm]);const handleSearchChange=event=>{setSearchTerm(event.target.value);activateSearchGlow();};const handleVoiceSearch=useCallback(()=>{const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;if(!SpeechRecognition){alert(\"Reconhecimento de voz não suportado neste navegador.\");return;}// Se já estiver escutando, para\nif(isListening){var _recognitionRef$curre,_recognitionRef$curre2;(_recognitionRef$curre=recognitionRef.current)===null||_recognitionRef$curre===void 0?void 0:(_recognitionRef$curre2=_recognitionRef$curre.stop)===null||_recognitionRef$curre2===void 0?void 0:_recognitionRef$curre2.call(_recognitionRef$curre);setIsListening(false);return;}const recognition=new SpeechRecognition();recognition.lang=\"pt-BR\";recognition.interimResults=true;recognition.maxAlternatives=1;recognition.onstart=()=>{setIsListening(true);activateSearchGlow();};recognition.onresult=event=>{const transcript=Array.from(event.results).map(result=>{var _result$0$transcript,_result$;return(_result$0$transcript=(_result$=result[0])===null||_result$===void 0?void 0:_result$.transcript)!==null&&_result$0$transcript!==void 0?_result$0$transcript:\"\";}).join(\"\").trim();setSearchTerm(transcript);activateSearchGlow();const hasFinal=Array.from(event.results).some(result=>result.isFinal);if(hasFinal&&transcript){performSearch(transcript);}};recognition.onerror=error=>{console.error(\"Erro no reconhecimento de voz:\",error);recognition.stop();};recognition.onend=()=>{setIsListening(false);recognitionRef.current=null;};recognitionRef.current=recognition;recognition.start();},[activateSearchGlow,isListening,performSearch]);const handleVoiceButtonPointerDown=useCallback(event=>{if(event.pointerType!==\"touch\"&&event.pointerType!==\"pen\")return;event.preventDefault();handleVoiceSearch();},[handleVoiceSearch]);// Cleanup ao desmontar\nuseEffect(()=>{return()=>{var _recognitionRef$curre3,_recognitionRef$curre4;(_recognitionRef$curre3=recognitionRef.current)===null||_recognitionRef$curre3===void 0?void 0:(_recognitionRef$curre4=_recognitionRef$curre3.stop)===null||_recognitionRef$curre4===void 0?void 0:_recognitionRef$curre4.call(_recognitionRef$curre3);recognitionRef.current=null;if(inactivityTimerRef.current)clearTimeout(inactivityTimerRef.current);};},[]);useEffect(()=>{setIsImageLoaded(false);},[layer===null||layer===void 0?void 0:layer.id]);return/*#__PURE__*/_jsx(\"div\",{className:\"relative h-screen w-screen overflow-hidden bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 map-touch-layer \".concat(hasRoute?\"route-active\":\"\"),children:/*#__PURE__*/_jsx(TransformWrapper,{ref:transformRef,minScale:0.01,maxScale:40,initialScale:2,wheel:{step:0.08},pinch:{step:6},panning:{velocityDisabled:true},doubleClick:{disabled:true},children:()=>/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"pointer-events-none absolute inset-x-0 bottom-6 z-20 flex justify-center px-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pointer-events-auto search-shell \".concat(isSearchFocused?\"search-shell--active\":\"\",\" \").concat(isListening?\"search-shell--listening\":\"\"),style:{width:\"min(\".concat(computedSearchWidth,\"px, 90vw)\"),maxWidth:\"640px\"},children:/*#__PURE__*/_jsxs(\"form\",{className:\"ui-overlay search-shell__form flex items-center gap-3 rounded-full bg-slate-950/80 px-5 py-4 text-white backdrop-blur-2xl shadow-soft animate-glass\",onSubmit:handleSearchSubmit,onFocus:()=>activateSearchGlow(),onBlur:event=>{if(!event.currentTarget.contains(event.relatedTarget)){setIsSearchFocused(false);if(inactivityTimerRef.current){clearTimeout(inactivityTimerRef.current);}}},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"room-search\",autoComplete:\"off\",value:searchTerm,onChange:handleSearchChange,className:\"flex-1 bg-transparent text-sm text-white placeholder-white/50 focus:outline-none\",placeholder:\"Pesquise por nome, c\\xF3digo ou bloco da sala...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"rounded-full bg-slate-900/65 px-4 py-2 text-xs font-semibold uppercase tracking-wide transition hover:bg-slate-800/80\",children:\"Buscar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"audio-trigger \".concat(isListening?\"audio-trigger--active\":\"\",\" flex h-10 w-10 items-center justify-center rounded-full border border-white/30 text-white transition\"),\"aria-pressed\":isListening,title:\"Pesquisar por voz (pt-BR)\",onPointerDown:handleVoiceButtonPointerDown,onClick:handleVoiceSearch,children:/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",className:\"h-4 w-4\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M12 3a3 3 0 0 1 3 3v5a3 3 0 0 1-6 0V6a3 3 0 0 1 3-3z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M19 10a7 7 0 0 1-14 0\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"17\",x2:\"12\",y2:\"21\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"8\",y1:\"21\",x2:\"16\",y2:\"21\"})]})})]})})}),/*#__PURE__*/_jsx(TransformComponent,{wrapperClass:\"h-full w-full\",contentClass:\"h-full w-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-screen w-screen select-none\",children:[/*#__PURE__*/_jsx(\"img\",{src:layer.imagePath,alt:layer.name,className:\"block h-screen w-screen object-cover transition duration-700 ease-out \".concat(isImageLoaded?\"opacity-100 scale-100\":\"opacity-0 scale-95\"),draggable:false,onLoad:()=>setIsImageLoaded(true),onError:()=>console.warn(\"Imagem não encontrada:\",layer.imagePath)}),/*#__PURE__*/_jsx(\"div\",{className:\"pointer-events-none absolute inset-0 bg-gradient-to-b from-slate-950/30 via-transparent to-slate-950/45\"}),hasRoute&&/*#__PURE__*/_jsx(\"svg\",{className:\"pointer-events-none absolute inset-0 h-full w-full\",viewBox:\"0 0 100 100\",preserveAspectRatio:\"none\",children:/*#__PURE__*/_jsx(\"path\",{d:routePath,fill:\"none\",stroke:\"#34d399\",strokeWidth:\"1.2\",strokeLinejoin:\"round\",strokeLinecap:\"round\",className:\"route-dash\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0\",children:hotspots.map(spot=>{var _spot$label2;const isActive=selectedHotspotId===spot.id;return/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"group hotspot-floating absolute -translate-x-1/2 -translate-y-1/2 rounded-full border px-3 py-1 text-[11px] font-semibold uppercase tracking-wide backdrop-blur transition duration-300 ease-out \".concat(isActive?\"border-emerald-300 bg-emerald-400/95 text-slate-900 shadow-2xl hotspot-ping\":\"border-white/40 bg-white/20 text-white hover:-translate-y-1 hover:bg-white/35 hover:shadow-xl\"),style:{left:\"\".concat(spot.xPercent,\"%\"),top:\"\".concat(spot.yPercent,\"%\")},onClick:()=>onHotspotSelect===null||onHotspotSelect===void 0?void 0:onHotspotSelect(spot.id),children:[/*#__PURE__*/_jsx(\"span\",{className:\"pointer-events-none\",children:(_spot$label2=spot.label)!==null&&_spot$label2!==void 0?_spot$label2:\"Hotspot\"}),/*#__PURE__*/_jsx(\"span\",{className:\"pointer-events-none absolute left-1/2 top-full mt-2 hidden -translate-x-1/2 whitespace-nowrap rounded-lg bg-slate-900/80 px-2 py-1 text-[10px] text-white shadow-soft group-hover:block\",children:spot.title})]},spot.id);})})]})})]})})});}export default MapViewer;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","TransformWrapper","TransformComponent","buildRoutePath","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MapViewer","_ref","layer","hotspots","selectedHotspotId","onHotspotSelect","routePoints","transformRef","routePath","hasRoute","length","isImageLoaded","setIsImageLoaded","searchTerm","setSearchTerm","isListening","setIsListening","isSearchFocused","setIsSearchFocused","inactivityTimerRef","recognitionRef","computedSearchWidth","base","max","extra","Math","min","activateSearchGlow","current","clearTimeout","setTimeout","performSearch","term","normalized","trim","toLowerCase","match","find","spot","_spot$title$toLowerCa","_spot$title","_spot$label$toLowerCa","_spot$label","title","label","includes","id","console","info","handleSearchSubmit","event","preventDefault","handleSearchChange","target","value","handleVoiceSearch","SpeechRecognition","window","webkitSpeechRecognition","alert","_recognitionRef$curre","_recognitionRef$curre2","stop","call","recognition","lang","interimResults","maxAlternatives","onstart","onresult","transcript","Array","from","results","map","result","_result$0$transcript","_result$","join","hasFinal","some","isFinal","onerror","error","onend","start","handleVoiceButtonPointerDown","pointerType","_recognitionRef$curre3","_recognitionRef$curre4","className","concat","children","ref","minScale","maxScale","initialScale","wheel","step","pinch","panning","velocityDisabled","doubleClick","disabled","style","width","maxWidth","onSubmit","onFocus","onBlur","currentTarget","contains","relatedTarget","type","name","autoComplete","onChange","placeholder","onPointerDown","onClick","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","x1","y1","x2","y2","wrapperClass","contentClass","src","imagePath","alt","draggable","onLoad","onError","warn","preserveAspectRatio","_spot$label2","isActive","left","xPercent","top","yPercent"],"sources":["C:/Users/joaop/OneDrive/Área de Trabalho/LocaIFF-App/src/components/MapViewer.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { TransformWrapper, TransformComponent } from \"react-zoom-pan-pinch\";\r\nimport { buildRoutePath } from \"../utils/routeUtils\";\r\n\r\nfunction MapViewer({ layer, hotspots, selectedHotspotId, onHotspotSelect, routePoints, transformRef }) {\r\n  const routePath = useMemo(() => buildRoutePath(routePoints), [routePoints]);\r\n  const hasRoute = routePoints?.length > 1;\r\n\r\n  const [isImageLoaded, setIsImageLoaded] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isSearchFocused, setIsSearchFocused] = useState(false);\r\n\r\n  const inactivityTimerRef = useRef(null);\r\n  const recognitionRef = useRef(null); // ✅ adicionado\r\n\r\n  // Ajusta largura da barra de pesquisa dinamicamente\r\n  const computedSearchWidth = useMemo(() => {\r\n    const base = 480;\r\n    const max = 680;\r\n    const extra = Math.min(searchTerm.length * 12, max - base);\r\n    return base + extra;\r\n  }, [searchTerm.length]);\r\n\r\n  const activateSearchGlow = useCallback(() => {\r\n    setIsSearchFocused(true);\r\n    if (inactivityTimerRef.current) {\r\n      clearTimeout(inactivityTimerRef.current);\r\n    }\r\n    inactivityTimerRef.current = setTimeout(() => {\r\n      setIsSearchFocused(false);\r\n    }, 5000);\r\n  }, []);\r\n\r\n  const performSearch = useCallback(\r\n    (term) => {\r\n      const normalized = term.trim().toLowerCase();\r\n      if (!normalized) return;\r\n\r\n      const match = hotspots.find((spot) => {\r\n        const title = spot.title?.toLowerCase() ?? \"\";\r\n        const label = spot.label?.toLowerCase() ?? \"\";\r\n        return title.includes(normalized) || label.includes(normalized);\r\n      });\r\n\r\n      if (match) {\r\n        onHotspotSelect?.(match.id);\r\n      } else {\r\n        console.info(\"Nenhum hotspot encontrado para:\", term);\r\n      }\r\n    },\r\n    [hotspots, onHotspotSelect]\r\n  );\r\n\r\n  const handleSearchSubmit = useCallback(\r\n    (event) => {\r\n      event.preventDefault();\r\n      activateSearchGlow();\r\n      performSearch(searchTerm);\r\n    },\r\n    [activateSearchGlow, performSearch, searchTerm]\r\n  );\r\n\r\n  const handleSearchChange = (event) => {\r\n    setSearchTerm(event.target.value);\r\n    activateSearchGlow();\r\n  };\r\n\r\n  const handleVoiceSearch = useCallback(() => {\r\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n    if (!SpeechRecognition) {\r\n      alert(\"Reconhecimento de voz não suportado neste navegador.\");\r\n      return;\r\n    }\r\n\r\n    // Se já estiver escutando, para\r\n    if (isListening) {\r\n      recognitionRef.current?.stop?.();\r\n      setIsListening(false);\r\n      return;\r\n    }\r\n\r\n    const recognition = new SpeechRecognition();\r\n    recognition.lang = \"pt-BR\";\r\n    recognition.interimResults = true;\r\n    recognition.maxAlternatives = 1;\r\n\r\n    recognition.onstart = () => {\r\n      setIsListening(true);\r\n      activateSearchGlow();\r\n    };\r\n\r\n    recognition.onresult = (event) => {\r\n      const transcript = Array.from(event.results)\r\n        .map((result) => result[0]?.transcript ?? \"\")\r\n        .join(\"\")\r\n        .trim();\r\n\r\n      setSearchTerm(transcript);\r\n      activateSearchGlow();\r\n\r\n      const hasFinal = Array.from(event.results).some((result) => result.isFinal);\r\n      if (hasFinal && transcript) {\r\n        performSearch(transcript);\r\n      }\r\n    };\r\n\r\n    recognition.onerror = (error) => {\r\n      console.error(\"Erro no reconhecimento de voz:\", error);\r\n      recognition.stop();\r\n    };\r\n\r\n    recognition.onend = () => {\r\n      setIsListening(false);\r\n      recognitionRef.current = null;\r\n    };\r\n\r\n    recognitionRef.current = recognition;\r\n    recognition.start();\r\n  }, [activateSearchGlow, isListening, performSearch]);\r\n\r\n  const handleVoiceButtonPointerDown = useCallback(\r\n    (event) => {\r\n      if (event.pointerType !== \"touch\" && event.pointerType !== \"pen\") return;\r\n      event.preventDefault();\r\n      handleVoiceSearch();\r\n    },\r\n    [handleVoiceSearch]\r\n  );\r\n\r\n  // Cleanup ao desmontar\r\n  useEffect(() => {\r\n    return () => {\r\n      recognitionRef.current?.stop?.();\r\n      recognitionRef.current = null;\r\n      if (inactivityTimerRef.current) clearTimeout(inactivityTimerRef.current);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setIsImageLoaded(false);\r\n  }, [layer?.id]);\r\n\r\n  return (\r\n    <div\r\n      className={`relative h-screen w-screen overflow-hidden bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 map-touch-layer ${\r\n        hasRoute ? \"route-active\" : \"\"\r\n      }`}\r\n    >\r\n      <TransformWrapper\r\n        ref={transformRef}\r\n        minScale={0.01}\r\n        maxScale={40}\r\n        initialScale={2}\r\n        wheel={{ step: 0.08 }}\r\n        pinch={{ step: 6 }}\r\n        panning={{ velocityDisabled: true }}\r\n        doubleClick={{ disabled: true }}\r\n      >\r\n        {() => (\r\n          <>\r\n            <div className=\"pointer-events-none absolute inset-x-0 bottom-6 z-20 flex justify-center px-6\">\r\n              <div\r\n                className={`pointer-events-auto search-shell ${isSearchFocused ? \"search-shell--active\" : \"\"} ${isListening ? \"search-shell--listening\" : \"\"}`}\r\n                style={{ width: `min(${computedSearchWidth}px, 90vw)`, maxWidth: \"640px\" }}\r\n              >\r\n                <form\r\n                  className=\"ui-overlay search-shell__form flex items-center gap-3 rounded-full bg-slate-950/80 px-5 py-4 text-white backdrop-blur-2xl shadow-soft animate-glass\"\r\n                  onSubmit={handleSearchSubmit}\r\n                  onFocus={() => activateSearchGlow()}\r\n                  onBlur={(event) => {\r\n                    if (!event.currentTarget.contains(event.relatedTarget)) {\r\n                      setIsSearchFocused(false);\r\n                      if (inactivityTimerRef.current) {\r\n                        clearTimeout(inactivityTimerRef.current);\r\n                      }\r\n                    }\r\n                  }}\r\n                >\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"room-search\"\r\n                    autoComplete=\"off\"\r\n                    value={searchTerm}\r\n                    onChange={handleSearchChange}\r\n                    className=\"flex-1 bg-transparent text-sm text-white placeholder-white/50 focus:outline-none\"\r\n                    placeholder=\"Pesquise por nome, código ou bloco da sala...\"\r\n                  />\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"rounded-full bg-slate-900/65 px-4 py-2 text-xs font-semibold uppercase tracking-wide transition hover:bg-slate-800/80\"\r\n                  >\r\n                    Buscar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={`audio-trigger ${isListening ? \"audio-trigger--active\" : \"\"} flex h-10 w-10 items-center justify-center rounded-full border border-white/30 text-white transition`}\r\n                    aria-pressed={isListening}\r\n                    title=\"Pesquisar por voz (pt-BR)\"\r\n                    onPointerDown={handleVoiceButtonPointerDown}\r\n                    onClick={handleVoiceSearch}\r\n                  >\r\n                    <svg\r\n                      viewBox=\"0 0 24 24\"\r\n                      className=\"h-4 w-4\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                    >\r\n                      <path d=\"M12 3a3 3 0 0 1 3 3v5a3 3 0 0 1-6 0V6a3 3 0 0 1 3-3z\" />\r\n                      <path d=\"M19 10a7 7 0 0 1-14 0\" />\r\n                      <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\" />\r\n                      <line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\" />\r\n                    </svg>\r\n                  </button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n            <TransformComponent wrapperClass=\"h-full w-full\" contentClass=\"h-full w-full\">\r\n              <div className=\"relative h-screen w-screen select-none\">\r\n                <img\r\n                  src={layer.imagePath}\r\n                  alt={layer.name}\r\n                  className={`block h-screen w-screen object-cover transition duration-700 ease-out ${\r\n                    isImageLoaded ? \"opacity-100 scale-100\" : \"opacity-0 scale-95\"\r\n                  }`}\r\n                  draggable={false}\r\n                  onLoad={() => setIsImageLoaded(true)}\r\n                  onError={() => console.warn(\"Imagem não encontrada:\", layer.imagePath)}\r\n                />\r\n                <div className=\"pointer-events-none absolute inset-0 bg-gradient-to-b from-slate-950/30 via-transparent to-slate-950/45\"></div>\r\n\r\n                {hasRoute && (\r\n                  <svg\r\n                    className=\"pointer-events-none absolute inset-0 h-full w-full\"\r\n                    viewBox=\"0 0 100 100\"\r\n                    preserveAspectRatio=\"none\"\r\n                  >\r\n                    <path\r\n                      d={routePath}\r\n                      fill=\"none\"\r\n                      stroke=\"#34d399\"\r\n                      strokeWidth=\"1.2\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeLinecap=\"round\"\r\n                      className=\"route-dash\"\r\n                    />\r\n                  </svg>\r\n                )}\r\n\r\n                <div className=\"absolute inset-0\">\r\n                  {hotspots.map((spot) => {\r\n                    const isActive = selectedHotspotId === spot.id;\r\n                    return (\r\n                      <button\r\n                        key={spot.id}\r\n                        type=\"button\"\r\n                        className={`group hotspot-floating absolute -translate-x-1/2 -translate-y-1/2 rounded-full border px-3 py-1 text-[11px] font-semibold uppercase tracking-wide backdrop-blur transition duration-300 ease-out ${\r\n                          isActive\r\n                            ? \"border-emerald-300 bg-emerald-400/95 text-slate-900 shadow-2xl hotspot-ping\"\r\n                            : \"border-white/40 bg-white/20 text-white hover:-translate-y-1 hover:bg-white/35 hover:shadow-xl\"\r\n                        }`}\r\n                        style={{ left: `${spot.xPercent}%`, top: `${spot.yPercent}%` }}\r\n                        onClick={() => onHotspotSelect?.(spot.id)}\r\n                      >\r\n                        <span className=\"pointer-events-none\">{spot.label ?? \"Hotspot\"}</span>\r\n                        <span className=\"pointer-events-none absolute left-1/2 top-full mt-2 hidden -translate-x-1/2 whitespace-nowrap rounded-lg bg-slate-900/80 px-2 py-1 text-[10px] text-white shadow-soft group-hover:block\">\r\n                          {spot.title}\r\n                        </span>\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </TransformComponent>\r\n          </>\r\n        )}\r\n      </TransformWrapper>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MapViewer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}