{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joaop\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\Lugaiff\\\\src\\\\components\\\\MapViewer.js\",\n  _s = $RefreshSig$();\nimport React, { useMemo } from \"react\";\nimport { TransformWrapper, TransformComponent } from \"react-zoom-pan-pinch\";\nimport { buildRoutePath, percentPointsToPixels } from \"../utils/routeUtils\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction MapViewer({\n  layer,\n  hotspots,\n  selectedHotspotId,\n  onHotspotSelect,\n  routePoints\n}) {\n  _s();\n  const routePath = useMemo(() => buildRoutePath(routePoints), [routePoints]);\n  const hasRoute = (routePoints === null || routePoints === void 0 ? void 0 : routePoints.length) > 1;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-[70vh] flex-col\",\n    children: /*#__PURE__*/_jsxDEV(TransformWrapper, {\n      minScale: 0.8,\n      maxScale: 4,\n      initialScale: 1,\n      wheel: {\n        step: 0.2\n      },\n      pinch: {\n        step: 5\n      },\n      panning: {\n        velocityDisabled: true\n      },\n      doubleClick: {\n        disabled: true\n      },\n      children: ({\n        zoomIn,\n        zoomOut,\n        resetTransform\n      }) => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3 flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"rounded-md bg-slate-900 px-3 py-1 text-xs font-semibold text-white hover:bg-slate-700\",\n            onClick: zoomIn,\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 23,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"rounded-md bg-slate-900 px-3 py-1 text-xs font-semibold text-white hover:bg-slate-700\",\n            onClick: zoomOut,\n            children: \"-\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"rounded-md bg-slate-200 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-300\",\n            onClick: resetTransform,\n            children: \"Resetar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-slate-500\",\n            children: \"Arraste para mover \\u2022 Scroll/pinch para zoom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative flex-1 overflow-hidden rounded-xl border border-slate-200 bg-slate-50 shadow-inner map-touch-layer\",\n          children: /*#__PURE__*/_jsxDEV(TransformComponent, {\n            wrapperClass: \"w-full h-full\",\n            contentClass: \"w-full h-full\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative select-none\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: layer.imagePath,\n                alt: layer.name,\n                className: \"block max-h-[80vh] w-full object-contain\",\n                draggable: false,\n                onError: () => {\n                  console.warn(\"Imagem não encontrada:\", layer.imagePath);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"pointer-events-none absolute inset-0 h-full w-full\",\n                viewBox: \"0 0 100 100\",\n                preserveAspectRatio: \"none\",\n                children: hasRoute ? /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: routePath,\n                  fill: \"none\",\n                  stroke: \"#10b981\",\n                  strokeWidth: \"1.2\",\n                  strokeLinejoin: \"round\",\n                  strokeLinecap: \"round\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 23\n                }, this) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pointer-events-none absolute inset-0\",\n                children: percentPointsToPixels(routePoints, 100, 100).length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0\",\n                children: hotspots.map(spot => {\n                  var _spot$label;\n                  return /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: `group absolute -translate-x-1/2 -translate-y-1/2 rounded-full border-2 px-2 py-1 text-[11px] font-semibold text-white shadow-lg transition ${selectedHotspotId === spot.id ? \"border-amber-300 bg-amber-500\" : \"border-slate-900 bg-slate-900 opacity-80 hover:opacity-100\"}`,\n                    style: {\n                      left: `${spot.xPercent}%`,\n                      top: `${spot.yPercent}%`\n                    },\n                    onClick: () => onHotspotSelect === null || onHotspotSelect === void 0 ? void 0 : onHotspotSelect(spot.id),\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"pointer-events-none\",\n                      children: (_spot$label = spot.label) !== null && _spot$label !== void 0 ? _spot$label : \"Hotspot\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 101,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"pointer-events-none absolute left-1/2 top-full mt-1 hidden -translate-x-1/2 whitespace-nowrap rounded-md bg-slate-900 px-2 py-1 text-[10px] text-white shadow-md group-hover:block\",\n                      children: spot.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 102,\n                      columnNumber: 25\n                    }, this)]\n                  }, spot.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 87,\n                    columnNumber: 23\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 5\n  }, this);\n}\n_s(MapViewer, \"lUiI1vFsz+IlPoMOEBgQRDNFcls=\");\n_c = MapViewer;\nexport default MapViewer;\nvar _c;\n$RefreshReg$(_c, \"MapViewer\");","map":{"version":3,"names":["React","useMemo","TransformWrapper","TransformComponent","buildRoutePath","percentPointsToPixels","jsxDEV","_jsxDEV","Fragment","_Fragment","MapViewer","layer","hotspots","selectedHotspotId","onHotspotSelect","routePoints","_s","routePath","hasRoute","length","className","children","minScale","maxScale","initialScale","wheel","step","pinch","panning","velocityDisabled","doubleClick","disabled","zoomIn","zoomOut","resetTransform","type","onClick","fileName","_jsxFileName","lineNumber","columnNumber","wrapperClass","contentClass","src","imagePath","alt","name","draggable","onError","console","warn","viewBox","preserveAspectRatio","d","fill","stroke","strokeWidth","strokeLinejoin","strokeLinecap","map","spot","_spot$label","id","style","left","xPercent","top","yPercent","label","title","_c","$RefreshReg$"],"sources":["C:/Users/joaop/OneDrive/Área de Trabalho/Lugaiff/src/components/MapViewer.js"],"sourcesContent":["import React, { useMemo } from \"react\";\r\nimport { TransformWrapper, TransformComponent } from \"react-zoom-pan-pinch\";\r\nimport { buildRoutePath, percentPointsToPixels } from \"../utils/routeUtils\";\r\n\r\nfunction MapViewer({ layer, hotspots, selectedHotspotId, onHotspotSelect, routePoints }) {\r\n  const routePath = useMemo(() => buildRoutePath(routePoints), [routePoints]);\r\n  const hasRoute = routePoints?.length > 1;\r\n\r\n  return (\r\n    <div className=\"flex h-[70vh] flex-col\">\r\n      <TransformWrapper\r\n        minScale={0.8}\r\n        maxScale={4}\r\n        initialScale={1}\r\n        wheel={{ step: 0.2 }}\r\n        pinch={{ step: 5 }}\r\n        panning={{ velocityDisabled: true }}\r\n        doubleClick={{ disabled: true }}\r\n      >\r\n        {({ zoomIn, zoomOut, resetTransform }) => (\r\n          <>\r\n            <div className=\"mb-3 flex items-center gap-2\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"rounded-md bg-slate-900 px-3 py-1 text-xs font-semibold text-white hover:bg-slate-700\"\r\n                onClick={zoomIn}\r\n              >\r\n                +\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"rounded-md bg-slate-900 px-3 py-1 text-xs font-semibold text-white hover:bg-slate-700\"\r\n                onClick={zoomOut}\r\n              >\r\n                -\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"rounded-md bg-slate-200 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-300\"\r\n                onClick={resetTransform}\r\n              >\r\n                Resetar\r\n              </button>\r\n              <span className=\"text-xs text-slate-500\">\r\n                {/* EDITAR: ajustar instruções conforme perfil dos usuários */}\r\n                Arraste para mover • Scroll/pinch para zoom\r\n              </span>\r\n            </div>\r\n\r\n            <div className=\"relative flex-1 overflow-hidden rounded-xl border border-slate-200 bg-slate-50 shadow-inner map-touch-layer\">\r\n              <TransformComponent wrapperClass=\"w-full h-full\" contentClass=\"w-full h-full\">\r\n                <div className=\"relative select-none\">\r\n                  <img\r\n                    src={layer.imagePath}\r\n                    alt={layer.name}\r\n                    className=\"block max-h-[80vh] w-full object-contain\"\r\n                    draggable={false}\r\n                    onError={() => {\r\n                      console.warn(\"Imagem não encontrada:\", layer.imagePath);\r\n                    }}\r\n                  />\r\n                  {/* TODO: substituir placeholders de rota por dados reais vindos da API */}\r\n                  <svg\r\n                    className=\"pointer-events-none absolute inset-0 h-full w-full\"\r\n                    viewBox=\"0 0 100 100\"\r\n                    preserveAspectRatio=\"none\"\r\n                  >\r\n                    {hasRoute ? (\r\n                      <path\r\n                        d={routePath}\r\n                        fill=\"none\"\r\n                        stroke=\"#10b981\"\r\n                        strokeWidth=\"1.2\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeLinecap=\"round\"\r\n                      />\r\n                    ) : null}\r\n                  </svg>\r\n\r\n                  <div className=\"pointer-events-none absolute inset-0\">\r\n                    {/* pontilhado invisível apenas para manter compatibilidade */}\r\n                    {percentPointsToPixels(routePoints, 100, 100).length}\r\n                  </div>\r\n\r\n                  <div className=\"absolute inset-0\">\r\n                    {hotspots.map((spot) => (\r\n                      <button\r\n                        key={spot.id}\r\n                        type=\"button\"\r\n                        className={`group absolute -translate-x-1/2 -translate-y-1/2 rounded-full border-2 px-2 py-1 text-[11px] font-semibold text-white shadow-lg transition ${\r\n                          selectedHotspotId === spot.id\r\n                            ? \"border-amber-300 bg-amber-500\"\r\n                            : \"border-slate-900 bg-slate-900 opacity-80 hover:opacity-100\"\r\n                        }`}\r\n                        style={{\r\n                          left: `${spot.xPercent}%`,\r\n                          top: `${spot.yPercent}%`\r\n                        }}\r\n                        onClick={() => onHotspotSelect?.(spot.id)}\r\n                      >\r\n                        <span className=\"pointer-events-none\">{spot.label ?? \"Hotspot\"}</span>\r\n                        <span className=\"pointer-events-none absolute left-1/2 top-full mt-1 hidden -translate-x-1/2 whitespace-nowrap rounded-md bg-slate-900 px-2 py-1 text-[10px] text-white shadow-md group-hover:block\">\r\n                          {spot.title}\r\n                        </span>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </TransformComponent>\r\n            </div>\r\n          </>\r\n        )}\r\n      </TransformWrapper>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MapViewer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}